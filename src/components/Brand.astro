---
import { SITE } from "../config/site";

interface Props {
  width?: number; // px
  height?: number; // px (optional; if omitted, computed from width)
}

const { width = 185, height }: Props = Astro.props as Props;

const intrinsicWidth = 333.12759;
const intrinsicHeight = 158.09644;
const ratio = intrinsicWidth / intrinsicHeight;
const w = width ?? intrinsicWidth;
const h = height ?? Math.round(w / ratio);
---

<a class="brand" href={import.meta.env.BASE_URL} aria-label={SITE.name}>
  <span class="container">
    <img
      class="logo"
      src={`${import.meta.env.BASE_URL}logo.svg`}
      alt={SITE.name}
      width={w}
      height={h}
      style={`width:${w}px;height:${h}px;`}
      loading="eager"
      decoding="async"
      fetchpriority="high"
    />
    <img class="badge" src={`${import.meta.env.BASE_URL}badge.svg`} alt="" aria-hidden="true" style={`width:${w}px;`} />
  </span>
</a>

<style>
  .brand {
    display: block;
    width: auto;
    height: 5rem;
    text-decoration: none;
    color: inherit;
  }

  .container {
    position: relative;
    display: inline-block;
  }

  .logo {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 1.5rem;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.75);
    box-shadow: 0 1px 0 rgba(255,255,255,0.05) inset, 0 6px 24px rgba(0,0,0,0.25);
  }

  .badge {
    position: absolute;
    right: -50px;
    bottom: -75px;
    height: auto;
    filter: drop-shadow(0 2px 6px rgba(0,0,0,0.4));
    pointer-events: none;
  }
</style>
